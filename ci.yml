Global:
  tool: build_submitter

Default:
  profile: [test]

Profiles:
  - profile:
    name: test
    env: cmc_standard
    command: >-
      AGILE_TRIGGER_USER=$AGILE_TRIGGER_USER
      AGILE_COMPILE_BRANCH=$AGILE_COMPILE_BRANCH
      AGILE_REVISION=$AGILE_REVISION
      sh script/test.sh
    release: false

  - profile:
    name: dev
    env: cmc_standard
    command: >-
      WEBPACK_ENV=dev
      sh script/build-for-deploy.sh
    release: true

  - profile:
    name: sit
    env: cmc_standard
    command: >-
      WEBPACK_ENV=sit
      sh script/build-for-deploy.sh
    release: true

  - profile:
    name: uat
    env: cmc_standard
    command: >-
      WEBPACK_ENV=uat
      sh script/build-for-deploy.sh
    release: true

  - profile:
    name: pot
    env: cmc_standard
    command: >-
      WEBPACK_ENV=pot
      sh script/build-for-deploy.sh
    release: true

  - profile:
    name: prd
    env: cmc_standard
    command: >-
      WEBPACK_ENV=prd
      sh script/build-for-deploy.sh
    release: true

  - profile:
    name: backend
    env: cmc_standard
    command: >-
      WEBPACK_ENV=backend
      AGILE_TRIGGER_USER=$AGILE_TRIGGER_USER
      AGILE_COMPILE_BRANCH=$AGILE_COMPILE_BRANCH
      AGILE_REVISION=$AGILE_REVISION
      BACKEND_BRANCH=$BACKEND_BRANCH
      sh script/build-for-backend.sh
    release: false

  - profile:
    name: standalone
    env: cmc_standard
    command: >-
      WEBPACK_ENV=standalone
      sh script/build-for-standalone.sh
    release: true
